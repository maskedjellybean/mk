(function(){angular.module("portfolio").controller("PortfolioController",["$scope","$timeout","rowsFactory",function($scope,$timeout,rowsFactory){$scope.rows={},this.show_more_active=!1,$scope.assignRows=function(){rowsFactory.createRows().then(function(rows){console.log(rows,"app rows"),$scope.rows=rows,console.log($scope.rows)})},$scope.assignRows(),this.preventFlip=function(originPiece,originRow){for(var r=0;config.row_count_zero>=r;r++)if(r!==originRow)for(var piecesInRow=$scope.rows["row_"+(""+r)].toggles.length-1,p=0;piecesInRow>=p;p++){var toggles=$scope.rows["row_"+(""+r)].toggles;toggles[p].notFlippable===!1?(toggles[p].notFlippable=!0,toggles[p].fade=!0):(toggles[p].notFlippable=!1,toggles[p].fade=!1)}},this.seeMore=function($scope,repeatScope,originPiece){var piece=$scope.rows["row_"+(""+repeatScope)].toggles[originPiece];$scope.rows["row_"+(""+repeatScope)].toggles[originPiece].notFlippable===!1&&(this.preventFlip(originPiece,repeatScope),this.flipToggle($scope,repeatScope,!0,originPiece),this.show_more_active?(this.show_more_active=!1,piece.showMoreActive=!1):(this.show_more_active=!0,piece.showMoreActive=!0))},this.flipToggle=function($scope,repeatScope,targetOther,originPiece){var toggles=$scope.rows["row_"+repeatScope].toggles;if(targetOther===!0)for(var p=0;config.pieces_per_row_zero>=p;p++)p!==originPiece&&(toggles[p].transform===!0?(toggles[p].hideDescription||(toggles[p].frontSwapped=!0,toggles[p].notFlippable=!0,toggles[p].hidePrimaryImg=!0,toggles[p]["hideFrontNbrImg_"+(""+originPiece)]=!1,toggles[p].transform=!1),toggles[p].hideDescription&&(toggles[p].transform=!1,toggles[p].notFlippable=!1,loopTimeoutFront(p,toggles,originPiece))):toggles[p].frontSwapped?toggles[p].frontSwapped&&(toggles[p].frontSwapped=!1,toggles[p].transform=!0,toggles[p].notFlippable=!1,loopTimeoutBack(p,toggles,originPiece)):(toggles[p].hideDescription=!0,toggles[p]["hideBackNbrImg_"+(""+originPiece)]=!1,toggles[p].notFlippable=!0,toggles[p].transform=!0));else toggles[originPiece].transform=toggles[originPiece].transform===!0?!1:!0},this.classToggle=function($scope,repeatScope,propertyName){var toggles=$scope.rows["row_"+repeatScope].toggles;toggles[targetPiece][propertyName]=toggles[targetPiece][propertyName]===!0?!1:!0},loopTimeoutBack=function(p,toggles,originPiece){$timeout(function(){toggles[p]["hideFrontNbrImg_"+(""+originPiece)]=!0,toggles[p].hidePrimaryImg=!1},500)},loopTimeoutFront=function(p,toggles,originPiece){$timeout(function(){toggles[p]["hideBackNbrImg_"+(""+originPiece)]=!0,toggles[p].hideDescription=!1},500)}}])})();